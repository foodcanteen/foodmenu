<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">Admin Dashboard</h1>
        <div>
            <h2>Add Food</h2>
            <form id="addFoodForm">
                <input type="text" id="name" placeholder="Name" required>
                <input type="number" id="price" placeholder="Price" required>
                <input type="text" id="image" placeholder="Image URL" required>
                <button type="submit">Add Food</button>
            </form>
        </div>
        <div>
            <h2>Menu</h2>
            <ul id="foodList"></ul>
            <button id="saveMenuButton">Save Today's Menu</button>
        </div>
    </div>
    <script>
        const addFoodForm = document.getElementById('addFoodForm');
        const foodList = document.getElementById('foodList');
        const saveMenuButton = document.getElementById('saveMenuButton');

        // Fetch food items
        function fetchFoods() {
            fetch('https://your-backend-url/food') // Replace with your backend URL
                .then(response => response.json())
                .then(data => {
                    foodList.innerHTML = '';
                    data.forEach(food => {
                        foodList.innerHTML += `
                            <li>
                                <input type="checkbox" value="${food.id}">${food.name} - RM${food.price.toFixed(2)}
                            </li>
                        `;
                    });
                })
                .catch(err => console.error('Failed to load foods:', err));
        }

        // Add food
        addFoodForm.addEventListener('submit', event => {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const price = document.getElementById('price').value;
            const image = document.getElementById('image').value;

            fetch('https://your-backend-url/food', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, price, image }),
            })
                .then(() => {
                    fetchFoods();
                    addFoodForm.reset();
                })
                .catch(err => console.error('Failed to add food:', err));
        });

        // Save menu
        saveMenuButton.addEventListener('click', () => {
            const selectedIds = Array.from(foodList.querySelectorAll('input[type="checkbox"]:checked')).map(
                checkbox => checkbox.value
            );

            fetch('https://your-backend-url/menu', {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ menu: selectedIds }),
            })
                .then(() => alert("Menu saved!"))
                .catch(err => console.error('Failed to save menu:', err));
        });

        // Initial load
        fetchFoods();
    </script>
</body>
</html>
